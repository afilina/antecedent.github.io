<!DOCTYPE html>
<html>
<head>
    <title>Examples - Patchwork</title>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
    <link rel="stylesheet" href="../style.css" type="text/css">

    <script>
      (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
      (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
      m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
      })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

      ga('create', 'UA-20483190-1', 'auto');
      ga('send', 'pageview');

    </script>

    <link rel="stylesheet" href="http://cdn.jsdelivr.net/highlight.js/8.3/styles/monokai_sublime.min.css">
    <script src="http://cdn.jsdelivr.net/highlight.js/8.3/highlight.min.js"></script>
    <script>
        window.onload = function() {
            var E = document.getElementsByTagName("pre");
            for (var i = E.length - 1; i >= 0; i--) {
                var e = E[i];
                hljs.highlightBlock(e);
            }
        };
    </script>
</head>
<body>
    <div class="ribbon">
      <div>Now with support for<br> global internal functions!</div>
    </div>
    <div id="nav">
        <a href="setup.html">Setup</a>
        <a href="examples.html">Examples</a>
        <a href="showcase.html">Showcase</a>
        <a href="implementation.html">Implementation</a>
        <a href="changelog.html">Changelog</a>
        <a href="https://github.com/antecedent/patchwork">GitHub</a>
    </div>    <div id="top-outer" class="for-docs">
        <div id="top">
            <div id="square-pattern">
                <div style="background: rgb(190,216,244);"></div>
                <div style="background: rgb(191,216,242);"></div>
                <div style="background: rgb(189,212,240);"></div>
                <div style="background: rgb(191,213,245);"></div>
                <div style="background: rgb(194,216,236);"></div>
                <div style="background: rgb(184,210,249);"></div>
                <div style="background: rgb(196,210,243);"></div>
                <div style="background: rgb(184,218,249);"></div>
                <div style="background: rgb(192,209,253);"></div>
                <div style="background: rgb(193,210,245);"></div>
                <div style="background: rgb(187,219,247);"></div>
                <div style="background: rgb(188,215,246);"></div>
                <div style="background: rgb(189,217,242);"></div>
                <div style="background: rgb(190,216,244);"></div>
                <div style="background: rgb(190,216,244);"></div>
                <div style="background: rgb(191,216,245);"></div>
                <div style="background: rgb(187,218,243);"></div>
                <div style="background: rgb(192,218,240);"></div>
                <div style="background: rgb(192,219,250);"></div>
                <div style="background: rgb(188,221,235);"></div>
                <div style="background: rgb(185,213,250);"></div>
                <div style="background: rgb(200,221,244);"></div>
                <div style="background: rgb(181,213,243);"></div>
                <div style="background: rgb(187,218,239);"></div>
                <div style="background: rgb(187,215,238);"></div>
                <div style="background: rgb(189,212,240);"></div>
            </div>
            <div id="header">
                <h1><a href="../">Patchwork</a></h1>
            </div>
        </div>
    </div>

    <div id="main-outer">
        <div id="main">
            <h3>Examples</h3>

            <div style="margin-top: 20px; margin-bottom: 10px; overflow: auto; background: linear-gradient(to bottom, #e0f3fa 0%,#d8f0fc 50%,#b8e2f6 51%,#b6dffd 100%); border-radius: 10px; box-shadow: 0 0 12px 0px #acbfc8; height: 30px;">
                <div style="margin: 0 auto; width: 450px;">
                    <div style="float: left; width: 150px; background: radial-gradient(rgba(0, 127, 255, .60) 0%, rgba(0, 127, 255, .30) 25%, rgba(0, 127, 255, .15) 50%, transparent 75%); height: 18px; padding-top: 6px; padding-bottom: 6px; text-align: center; text-shadow: 0 0 5px white;">Stopping the time</div>
                    <div style="float: left; width: 150px;  height: 18px; padding-top: 6px; padding-bottom: 6px; text-align: center; text-shadow: 0 0 3px white;">DIY profiling</div>
                    <div style="float: left; width: 150px;  height: 18px; padding-top: 6px; padding-bottom: 6px; text-align: center; text-shadow: 0 0 3px white;">A logging aspect</div>
                </div>
            </div>

            <div style="overflow: auto;">
            <div style="float: left; background: #DDD; height: 300px; width: 286px; margin-top: 30px; border-top-left-radius: 5px; border-bottom-left-radius: 5px;">&nbsp;
            </div>
            <pre class="php" style="float: right; width: 550px;">
namespace App\Tests\Data\Repositories\Traits;

use App\Data\Repositories\Traits\<span style="border: 1px solid #CCC; background: #333; border-radius: 5px;">CustomViewTrait</span> as CVT,
    Doctrine\ORM\QueryBuilder as QB;

class CustomViewTraitTest extends PHPUnit_Framework_TestCase
{
    # ...

    public function testExtractsEntriesFromThisMonth()
    {
        $time = Patchwork\replace("time", function() {
            return strtotime("1 January 2014");
        });

        $qb = $this->getMock(QB::class<span style="display:none;"> {}</span>);

        $qb->expects($this->once())
           ->method("where")
           ->with("timestamp >= ?1")
           ->will($this->returnValue($qb));

        $qb->expects($this->once())
           ->method("setParameter")
           ->with(1, strtotime("1 January 2014 - 30 days"))
           ->will($this->returnValue($qb));

        $cvt = $this->getMockForTrait(CVT::class<span style="display:none;"> {}</span>);

        $cvt->expects($this->once())
            ->method("createQueryBuilder")
            ->will($this->returnValue($qb));

        $this->assertEquals($cvt->fromThisMonth(), $qb);

        Patchwork\undo($time);
    }
}</pre>

</div>
            <div class="separator"></div>

            <div id="disqus_thread"></div>
            <script type="text/javascript">
                var disqus_shortname = 'antecedentgithub';
                var disqus_identifier = '/patchwork/docs/examples.html';
                var disqus_url = 'http://antecedent.github.com/patchwork/docs/examples.html';
                (function() {
                    var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
                    dsq.src = 'http://' + disqus_shortname + '.disqus.com/embed.js';
                    (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
                })();
            </script>
            <noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
        </div>
    </div>
</body>
</html>
